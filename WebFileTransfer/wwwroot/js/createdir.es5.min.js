"use strict";(function(n){var u="/api/filedata/createdir",r=function(n,t,i){n.setAttribute("data-"+t,i)},f=function(n,t){n.hasAttribute("data-"+t)&&n.removeAttribute("data-"+t)},t=undefined,e=/[\\\/\:\*\?\"\<\>\|]/,i=!1,o=function(o,s){var l=s.flyout,h=$(l).find(".createdir-name"),c=$(l).find(".createdir-ok")[0];h.val("");f(h[0],"containserror");c.context.set_enabled(!1);t=n.control.get_dirs();h.keyup($.debounce(250,function(){var i,n,u;if(t){for(i=h.val(),n=0;n<t.length;n++)if(i==t[n])break;n>=t.length?(u=e.exec(i),u==null?(c.context.set_enabled(!0),r(h[0],"containserror",!1)):(c.context.set_enabled(!1),r(h[0],"containserror",!0))):(c.context.set_enabled(!1),r(h[0],"containserror",!0))}}));c.context.events.add("click",function(){var t={name:h.val(),path:n.control.get_path()};c.context.set_enabled(!1);i=!0;$.ajax({url:u,type:"POST",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",async:!0,success:function(){i=!1;n.control.query_files(n.control.get_path());o.context.flyout.hideFlyout()},error:function(t){t.status==200?(i=!1,n.control.query_files(n.control.get_path()),o.context.flyout.hideFlyout()):(i=!1,alert("create directory error"))}})})},s=function(n,t){var r=t.flyout,u,f;if(i){t.prevent_hide=!0;return}u=$(r).find(".createdir-name");f=$(r).find(".createdir-ok")[0];f.context.events.clear("click");u.unbind("keyup")},h=function(){var n=$("#btn_createdir")[0];n.context.events.add("flyout_showed",o,!1);n.context.events.add("flyout_hiding",s,!1)};n.addEventListener("load",h,!1)})(window);